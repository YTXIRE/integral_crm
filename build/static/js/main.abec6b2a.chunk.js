(this.webpackJsonpintegralapp=this.webpackJsonpintegralapp||[]).push([[0],{506:function(e,t,a){e.exports=a(755)},511:function(e,t,a){},512:function(e,t,a){},530:function(e,t,a){},535:function(e,t,a){},650:function(e,t){},652:function(e,t){},686:function(e,t){},687:function(e,t){},731:function(e,t,a){},732:function(e,t,a){},752:function(e,t,a){},755:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),l=(a(511),a(512),a(136)),i=a(16),u=a.n(i),d=a(24),s=a(11),p=a(395),m=a(81),f=a(786),b=a(787),g=a(401),v=a(763),y=a(112),O=a(765),j=a(788),E=a(419),h="https://crmintegralapp.firebaseio.com/",S=a(14),N=a.n(S),x=a(62),w=a(245),T=a.n(w),C=a(246),P=a.n(C),I=a(247),R=a.n(I),A=a(248),k=a.n(A),J=a(249),B=a.n(J),D=a(250),L=a.n(D),z=(a(530),a(394)),V=a(393),W=a(776),q=a(779),M=a(778),F=a(777),G=a(322),U=a(165),H=a.n(U),K=function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],c=function(){var t=Object(d.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o(!1),void 0===(a=document.querySelector("#nameProvider").value.trim())||null===a||""===a){t.next=6;break}return t.next=5,N.a.post("".concat(h,"providers.json"),{name:a,iconType:"default"});case 5:e.fetchData();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundColor:"#282c34"}},r.a.createElement(G.a,{style:{color:"#fff",marginLeft:130,marginBottom:10,backgroundColor:"#00CED1"},"aria-label":"delete",color:"default",onClick:function(){o(!0)}},r.a.createElement(H.a,null))),r.a.createElement(W.a,{open:n,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(F.a,{id:"form-dialog-title"},"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430"),r.a.createElement(M.a,null,r.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"nameProvider",label:"\u0418\u043c\u044f",type:"email",fullWidth:!0})),r.a.createElement(q.a,null,r.a.createElement(z.a,{onClick:c,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(z.a,{onClick:c,color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))},$=a(780),Q=a(781),X=function(e){var t="";return(t=e.toString().includes(",")?e.toString().split(","):e.toString().split("."))[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),1===t.length?t.push("00"):1===t[1].length&&(t[1]+=0),t.join(",")},Y=function(e){return e.toString().includes("-")},Z=function(e){return e[0].toUpperCase()+e.slice(1)},_=a(48),ee=Object(p.a)({root:{minWidth:100},title:{fontSize:14}}),te=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),p=i[0],m=i[1],f=Object(n.useState)(""),b=Object(s.a)(f,2),g=b[0],v=b[1],O=[],j=[];function E(e){for(var t=0,a=0,n=0,r=0;r<e.length;r++)"aoNewGround"===e[r].company&&(t+=Number(e[r].payoff)),"oooNewGround"===e[r].company&&(a+=Number(e[r].payoff)),"oooIntegral"===e[r].company&&(n+=Number(e[r].payoff));return{aoNewGround:Math.round(t),oooNewGround:Math.round(a),oooIntegral:Math.round(n)}}function S(){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,l,i,d,s,p,f,b,g,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"/company.json"));case 2:for(a in(t=e.sent).data)j.push(t.data[a]);return e.next=6,N.a.get("".concat(h,"payoff.json"));case 6:for(r in(n=e.sent).data)JSON.parse(localStorage.getItem("currentProvider"))===n.data[r].provider&&O.push({company:n.data[r].company,payoff:n.data[r].payoff});return c(E(O)),JSON.parse(localStorage.getItem("provider")).map((function(e){e[1]===JSON.parse(localStorage.getItem("currentProvider"))&&v(e[0].name)})),o=[],l=[],e.next=15,N.a.get("".concat(h,"/objects.json"));case 15:for(d in(i=e.sent).data)i.data[d].provider===JSON.parse(localStorage.getItem("currentProvider"))&&(l.push([i.data[d].company,i.data[d].name,d]),o.push([i.data[d].name,d]));return e.next=19,N.a.get("".concat(h,"providersDataPayOff.json"));case 19:for(b in s=e.sent,o.map((function(e){var t=0,a=0;for(var n in s.data)s.data[n].object===e[1]&&(s.data[n].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(t+=Number(s.data[n].subTotal.replace(",",".").replace(/ /g,"")),s.data[n].delivery&&(t+=Number(s.data[n].delivery.replace(",","."))),s.data[n].plain&&(t+=Number(s.data[n].plain.replace(",","."))),s.data[n].underloading&&(t+=Number(s.data[n].underloading.replace(",",".")))),a+=Number(s.data[n].subTotal.replace(",",".").replace(/ /g,"")),s.data[n].delivery&&(a+=Number(s.data[n].delivery.replace(",","."))),s.data[n].plain&&(a+=Number(s.data[n].plain.replace(",","."))),s.data[n].underloading&&(a+=Number(s.data[n].underloading.replace(",","."))));for(var r in l)l[r][2]===e[1]&&(l[r][2]=t,l[r][3]=a)})),p={},f={},l.map((function(e){p[e[0]]?p[e[0]]+=e[2]:p[e[0]]=e[2],f[e[0]]?f[e[0]]+=e[3]:f[e[0]]=e[3]})),j)j[b].total=null!==(g=p[j[b].title])&&void 0!==g?g:0,j[b].total2=null!==(y=f[j[b].title])&&void 0!==y?y:0;m(j);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){S()}),[]),e.isUpdate&&S();var w=ee();return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,p.map((function(e){return r.a.createElement("td",{style:{width:"100vw"}},r.a.createElement(_.b,{to:"/provider/".concat(g,"/").concat(e.name),style:{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},onClick:function(){var t,a;t=e.title,a=e.name,localStorage.setItem("currentCompany",JSON.stringify(t)),localStorage.setItem("currentCompanyName",JSON.stringify(a))}},r.a.createElement($.a,{className:w.root},r.a.createElement(Q.a,null,r.a.createElement(y.a,{variant:"h5",component:"h2"},r.a.createElement("p",null,e.name)),r.a.createElement(y.a,{className:w.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},X(e.total))),r.a.createElement(y.a,{className:w.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("b",null,"\u0414\u043e\u043b\u0433"),": ",r.a.createElement("span",{style:{color:Y(e.total2-o[e.title])?"blue":"red",fontWeight:"bold"}},X(Math.round(e.total2-o[e.title]))))))))})))))},ae=(a(535),function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],c=function(){var t=Object(d.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o(!1),void 0===(a=document.querySelector("#nameProvider").value.trim())||null===a||""===a){t.next=6;break}return t.next=5,N.a.post("".concat(h,"objects.json"),{name:a,provider:JSON.parse(localStorage.getItem("currentProvider")),company:JSON.parse(localStorage.getItem("currentCompany"))});case 5:e.fetchDataProviderCards();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{onClick:function(){o(!0)}},r.a.createElement($.a,{className:"card"},r.a.createElement("div",{className:"cardItem"},r.a.createElement(y.a,{className:"title",gutterBottom:!0},r.a.createElement(H.a,{style:{fontSize:100}}))))),r.a.createElement(W.a,{open:n,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(F.a,{id:"form-dialog-title"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430"),r.a.createElement(M.a,null,r.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"nameProvider",label:"\u0418\u043c\u044f",type:"email",fullWidth:!0})),r.a.createElement(q.a,null,r.a.createElement(z.a,{onClick:c,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(z.a,{onClick:c,color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}),ne=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),p=i[0],m=i[1],f=Object(n.useState)([]),b=Object(s.a)(f,2),g=b[0],v=b[1],O=Object(n.useState)(0),j=Object(s.a)(O,2),E=(j[0],j[1],[]),S=[],x=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"/objects.json"));case 2:for(a in(t=e.sent).data)t.data[a].provider===JSON.parse(localStorage.getItem("currentProvider"))&&t.data[a].company===JSON.parse(localStorage.getItem("currentCompany"))&&(E.push([t.data[a].name]),S.push([t.data[a].name,a]));return localStorage.setItem("objects",JSON.stringify(S)),e.next=7,N.a.get("".concat(h,"/company.json"));case 7:for(r in(n=e.sent).data)n.data[r].title===JSON.parse(localStorage.getItem("currentCompany"))&&m(n.data[r].name);return JSON.parse(localStorage.getItem("provider")).map((function(e){e[1]===JSON.parse(localStorage.getItem("currentProvider"))&&v(e[0].name)})),e.next=13,N.a.get("".concat(h,"providersDataPayOff.json"));case 13:o=e.sent,S.map((function(e){var t=0;for(var a in o.data)o.data[a].object===e[1]&&(o.data[a].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(t+=Number(o.data[a].subTotal),o.data[a].delivery&&(t+=Number(o.data[a].delivery.replace(",","."))),o.data[a].plain&&(t+=Number(o.data[a].plain.replace(",","."))),o.data[a].underloading&&(t+=Number(o.data[a].underloading.replace(",",".")))));for(var n in E)E[n][0]===e[0]&&(E[n][1]=t)})),c(E);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[]),r.a.createElement("div",{style:{marginBottom:100}},r.a.createElement("p",null,null!==JSON.parse(localStorage.getItem("currentCompanyName"))?JSON.parse(localStorage.getItem("currentCompanyName")):null),r.a.createElement(ae,{fetchDataProviderCards:x}),o.map((function(e){return r.a.createElement(_.b,{to:"/provider/".concat(g,"/").concat(p,"/").concat(e[0]),key:Math.random(),onClick:function(){localStorage.setItem("currentObject",JSON.stringify(e[0]))}},r.a.createElement(z.a,null,r.a.createElement($.a,{className:"card"},r.a.createElement("div",{className:"cardItem"},r.a.createElement(y.a,{className:"title",gutterBottom:!0},e[0],r.a.createElement(y.a,{className:"cardSum",color:"textSecondary"},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},X(e[1]))))))))})))},re=a(41),oe=a(102),ce=a(137),le=a(122),ie=a.n(le),ue=a(123),de=a.n(ue),se=a(132),pe=a.n(se),me=a(124),fe=a.n(me),be=a(130),ge=a.n(be),ve=a(80),ye=a.n(ve),Oe=a(79),je=a.n(Oe),Ee=a(125),he=a.n(Ee),Se=a(126),Ne=a.n(Se),xe=a(127),we=a.n(xe),Te=a(128),Ce=a.n(Te),Pe=a(129),Ie=a.n(Pe),Re=a(133),Ae=a.n(Re),ke=a(98),Je=a.n(ke),Be=a(131),De=a.n(Be),Le=a(134),ze=a.n(Le),Ve=a(400),We=a(323),qe=a(329),Me=Object(p.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),Fe=function(e){var t=Me(),a=r.a.useState(e.value),n=Object(s.a)(a,2),o=n[0],c=n[1];return r.a.createElement(We.a,{className:t.formControl},r.a.createElement(qe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:o,onChange:function(t){c(t.target.value),e.updatedCement(t.target.value)}},e.data.map((function(e){return r.a.createElement(Ve.a,{key:e[0],value:e[0]},e[1])}))))},Ge=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),l=Object(s.a)(c,2),i=l[0],p=l[1],m=Object(n.useState)(0),f=Object(s.a)(m,2),b=f[0],g=f[1],v=Object(n.useState)(!0),y=Object(s.a)(v,2),O=y[0],j=y[1],E=Object(n.useState)(""),S=Object(s.a)(E,2),x=S[0],w=S[1];function T(e){return e.sort((function(e,t){return e[1]>t[1]?1:-1}))}var C=function(){var e=document.getElementById("volume").value,t=document.getElementById("pricePerOneTon").value,a=document.querySelector("#subTotal"),n=a.parentElement,r=document.createElement("input");r.id=a.id,r.style=a.style.cssText,r.placeholder=a.placeholder,e.includes(",")&&(e=e.replace(",",".").replace(" ","")),t.includes(",")&&(t=t.replace(",",".").replace(" ","")),r.value=(Number(e)*Number(t)).toFixed(2),document.querySelector("#subTotal").remove(),n.append(r)},P=function(e,t){var a,n=document.querySelectorAll("#delivery"),r=document.querySelectorAll("#underloading"),o=document.querySelectorAll("#plain"),c=document.querySelectorAll("#count"),l=Object(ce.a)(n);try{for(l.s();!(a=l.n()).done;){var i=a.value;i.dataset.id===t&&(n=Number(i.value))}}catch(j){l.e(j)}finally{l.f()}var u,d=Object(ce.a)(r);try{for(d.s();!(u=d.n()).done;){var s=u.value;s.dataset.id===t&&(r=Number(s.value))}}catch(j){d.e(j)}finally{d.f()}var p,m=Object(ce.a)(o);try{for(m.s();!(p=m.n()).done;){var f=p.value;f.dataset.id===t&&(o=Number(f.value))}}catch(j){m.e(j)}finally{m.f()}(e.includes(",")||e.includes(" "))&&(e=Number(e.replace(",",".").replace(/\s/gi,"")));var b,g=Object(ce.a)(c);try{for(g.s();!(b=g.n()).done;){var v=b.value;if(v.className===t){var y=v.parentElement,O=document.createElement("label");O.id="count",O.className=t,O.textContent=X(e+n+r+o),document.querySelector(".".concat(t)).remove(),y.append(O)}}}catch(j){g.e(j)}finally{g.f()}},I=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,c,l,i,d,s,m,f,b,v,y,O,E,S=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S.length>0&&void 0!==S[0]?S[0]:null,e.next=3,N.a.get("".concat(h,"dictionaryCement.json"));case 3:for(m in t=e.sent,a={},n=[],c=[],l=[],i=[],d=[],s=0,t.data)n.push([m,t.data[m].name]),c.push([m,t.data[m].name,t.data[m].price]);return f=T(n),b=T(c),f.map((function(e){a[e[0]]=e[1]})),b.map((function(e){l[e[0]]=[e[1],e[2]]})),v=function(e){w(e),C()},e.next=19,N.a.get("".concat(h,"providersDataPayOff.json"));case 19:for(E in y=e.sent,O=function(e){localStorage.getItem("objects")&&JSON.parse(localStorage.getItem("objects")).map((function(t){JSON.parse(localStorage.getItem("currentProvider"))===y.data[e].provider&&t[0]===JSON.parse(localStorage.getItem("currentObject"))&&t[1]===y.data[e].object&&(y.data[e].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(s+=Number(y.data[e].subTotal.replace(",",".")),y.data[e].delivery&&(s+=Number(y.data[e].delivery.replace(",","."))),y.data[e].plain&&(s+=Number(y.data[e].plain.replace(",","."))),y.data[e].underloading&&(s+=Number(y.data[e].underloading.replace(",",".")))),y.data[e].volume="NaN"!==Number(y.data[e].volume)&&0!==Number(y.data[e].volume)?X(y.data[e].volume.replace(",",".")):y.data[e].volume,y.data[e].pricePerOneTon="NaN"!==Number(y.data[e].pricePerOneTon)&&0!==Number(y.data[e].pricePerOneTon)?X(y.data[e].pricePerOneTon.replace(",",".")):y.data[e].pricePerOneTon,y.data[e].subTotal="NaN"!==Number(y.data[e].subTotal)&&0!==Number(y.data[e].subTotal)?X(y.data[e].subTotal.replace(",",".")):y.data[e].subTotal,y.data[e].comment=y.data[e].comment?Z(y.data[e].comment):y.data[e].comment,y.data[e].id=e,i.push({id:e,data:y.data[e]}),d.push(y.data[e]))}))},y.data)O(E);g(s),p(i),o({columns:[{title:"\u041c\u0430\u0440\u043a\u0430 \u0446\u0435\u043c\u0435\u043d\u0442\u0430 / \u0431\u0435\u0442\u043e\u043d\u0430",field:"brandCement",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px"},lookup:a,editComponent:function(e){var t=[];for(var n in a)t.push([n,a[n]]);return r.a.createElement(Fe,{data:t,value:e.value,updatedCement:v})}},{title:"\u041f\u0435\u0440\u0438\u043e\u0434",field:"period",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u041e\u0431\u044a\u0435\u043c",field:"volume",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},editComponent:function(e){return r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"50px"},value:e.value,id:"volume",placeholder:"\u041e\u0431\u044a\u0435\u043c",onChange:function(t){e.onChange(t.target.value),""!==t.target.value&&C()}})}},{title:"\u0426\u0435\u043d\u0430 \u0437\u0430 1 \u0442\u043e\u043d\u043d\u0443",field:"pricePerOneTon",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},editComponent:function(e){return r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"100px"},value:e.value,id:"pricePerOneTon",placeholder:"\u0426\u0435\u043d\u0430 \u0437\u0430 1 \u0442\u043e\u043d\u043d\u0443",onChange:function(t){e.onChange(t.target.value),""!==t.target.value&&C()}})}},{title:"\u0418\u0442\u043e\u0433\u043e",field:"subTotal",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},editComponent:function(e){return r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px"},value:e.value,id:"subTotal",placeholder:"\u0418\u0442\u043e\u0433\u043e",onChange:function(t){e.onChange(t.target.value)}})}},{title:"\u0414\u043e\u043a\u0438",field:"availabilityOfDocuments",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},lookup:{1:"\u0421\u043a\u0430\u043d",2:"\u041e\u0440\u0438\u0433\u0438\u043d\u0430\u043b",3:"\u041d\u0435\u0442"}},{title:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",emptyValue:"",headerStyle:{textAlign:"center"},field:"comment",cellStyle:function(e){return void 0!==e&&null!==e&&""!==e&&e.toString().toLowerCase().includes("\u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0435")?{color:"red",fontSize:"small",padding:"10px 10px 10px 0"}:{fontSize:"small",padding:"10px 10px 10px 0"}}}],data:d}),j(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){I()}),[]);var R={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(we.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))}))};return r.a.createElement("div",{style:{paddingBottom:60}},r.a.createElement(ie.a,{icons:R,localization:{header:{actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"},body:{emptyDataSourceMessage:"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439",filterRow:{filterTooltip:"\u0424\u0438\u043b\u044c\u0442\u0440"},addTooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",deleteTooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",editTooltip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",editRow:{deleteText:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c?",cancelTooltip:"\u041e\u0442\u043c\u0435\u043d\u0430",saveTooltip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}},grouping:{placeholder:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a..."},toolbar:{addRemoveColumns:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432",nRowsSelected:"{0} \u0437\u0430\u043f\u0438\u0441\u044c(\u0435\u0439) \u0432\u044b\u0431\u0440\u0430\u043d\u043e",showColumnsTitle:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",showColumnsAriaLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",exportTitle:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportAriaLabel:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportName:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSV",searchTooltip:"\u041f\u043e\u0438\u0441\u043a",searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a"},pagination:{labelDisplayedRows:"{from}-{to} \u0438\u0437 {count}",labelRowsSelect:"\u0441\u0442\u0440\u043e\u043a",labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:",firstAriaLabel:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",firstTooltip:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousAriaLabel:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousTooltip:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextAriaLabel:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextTooltip:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastAriaLabel:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430",lastTooltip:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430"}},title:JSON.parse(localStorage.getItem("currentObject")),columns:a.columns,data:a.data,options:{sorting:!1,selection:!1,grouping:!1,filtering:!1,exportButton:!0,pageSizeOptions:[5],draggable:!1,exportAllData:!0},detailPanel:function(e){if("-M3ytpeFI7Cry9gqb6c9"===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement("div",{style:{width:"800px",margin:"10px auto"}},r.a.createElement(z.a,{style:{marginRight:15},variant:"contained",onClick:function(){return function(e){var t,a=document.querySelectorAll("#delivery"),n=document.querySelectorAll("#underloading"),r=document.querySelectorAll("#plain"),o=Object(ce.a)(a);try{for(o.s();!(t=o.n()).done;){var c=t.value;c.dataset.id===e&&(a=c.value.replace(",",".").replace(/\s/gi,""))}}catch(m){o.e(m)}finally{o.f()}var l,i=Object(ce.a)(n);try{for(i.s();!(l=i.n()).done;){var u=l.value;u.dataset.id===e&&(n=u.value.replace(",",".").replace(/\s/gi,""))}}catch(m){i.e(m)}finally{i.f()}var d,s=Object(ce.a)(r);try{for(s.s();!(d=s.n()).done;){var p=d.value;p.dataset.id===e&&(r=p.value.replace(",",".").replace(/\s/gi,""))}}catch(m){s.e(m)}finally{s.f()}N.a.patch("".concat(h,"providersDataPayOff/").concat(e,".json"),{delivery:a,underloading:n,plain:r}).then((function(e){I()}))}(e.id)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px",marginRight:"10px"},defaultValue:e.delivery?X(e.delivery):"",id:"delivery",placeholder:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430","data-Id":e.id,onChange:function(){return P(e.subTotal,e.id)}}),r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px",marginRight:"10px"},defaultValue:e.underloading?X(e.underloading):"",id:"underloading",placeholder:"\u041d\u0435\u0434\u043e\u0433\u0440\u0443\u0437","data-Id":e.id,onChange:function(){return P(e.subTotal,e.id)}}),r.a.createElement("input",{type:"text",style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px",marginRight:"20px"},defaultValue:e.plain?X(e.plain):"",id:"plain",placeholder:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439","data-Id":e.id,onChange:function(){return P(e.subTotal,e.id)}}),r.a.createElement("span",null,r.a.createElement("label",null,"\u0418\u0442\u043e\u0433\u043e: "),r.a.createElement("label",{id:"count",className:e.id},function(e,t,a,n){var r=0,o=0,c=0,l=0;return(e.includes(",")||e.includes(" "))&&(r=Number(e.replace(",",".").replace(/\s/gi,""))),o=void 0!==t?Number(t):0,c=void 0!==a?Number(a):0,l=void 0!==n?Number(n):0,X(r+o+c+l)}(e.subTotal,e.delivery,e.underloading,e.plain))))},onRowClick:function(e,t,a){"-M3ytpeFI7Cry9gqb6c9"===JSON.parse(localStorage.getItem("currentProvider"))&&a()},isLoading:O,editable:{onRowAdd:function(e){return new Promise((function(t){setTimeout((function(){t(),o((function(t){var a=Object(oe.a)(t.data);return localStorage.getItem("objects")&&JSON.parse(localStorage.getItem("objects")).map((function(t){t[0]===JSON.parse(localStorage.getItem("currentObject"))&&(void 0===e.availabilityOfDocuments&&(e.availabilityOfDocuments=""),void 0===e.brandCement&&(e.brandCement=""),void 0===e.comment&&(e.comment=""),void 0===e.pricePerOneTon&&(e.pricePerOneTon=""),void 0===e.volume&&(e.volume=""),e.isAccounting=!1,e.delivery="",e.plain="",e.underloading="",e.whoCompany="",e.brandCement=x,e.volume=String(e.volume).includes(",")||String(e.volume).includes(" ")?e.volume.replace(",",".").replace(/ /g,""):e.volume,e.pricePerOneTon=document.getElementById("pricePerOneTon").value.includes(",")||document.getElementById("pricePerOneTon").value.includes(" ")?e.pricePerOneTon.replace(",",".").replace(/ /g,""):document.getElementById("pricePerOneTon").value,e.subTotal=document.getElementById("subTotal").value.includes(",")||document.getElementById("subTotal").value.includes(" ")?document.getElementById("subTotal").value.replace(",",".").replace(/ /g,""):document.getElementById("subTotal").value,e.object=t[1],e.provider=JSON.parse(localStorage.getItem("currentProvider")),N.a.post("".concat(h,"providersDataPayOff.json"),e).then((function(e){I()})))})),a.push(e),Object(re.a)({},t,{data:a})}))}),600)}))},onRowUpdate:function(e,t){return new Promise((function(a){setTimeout((function(){a(),t&&o((function(a){var n=Object(oe.a)(a.data);return i.map((function(a){if(a.data===n[n.indexOf(t)]){var r,o,c,l={};(String(e.volume).includes(",")||String(e.volume).includes(" "))&&(e.volume=e.volume.replace(",",".").replace(/ /g,"")),(""!==document.getElementById("pricePerOneTon").value||document.getElementById("pricePerOneTon").value.includes(",")||document.getElementById("pricePerOneTon").value.includes(" "))&&(e.pricePerOneTon=document.getElementById("pricePerOneTon").value.replace(",",".").replace(/ /g,"")),(""!==document.getElementById("subTotal").value||document.getElementById("subTotal").value.includes(",")||document.getElementById("subTotal").value.includes(" "))&&(e.subTotal=document.getElementById("subTotal").value.replace(",",".").replace(/ /g,"")),e.brandCement=""!==x?x:t.brandCement,e.whoCompany="",e.isAccounting=!1,e.delivery=null!==(r=t.delivery)&&void 0!==r?r:"",e.plain=null!==(o=t.plain)&&void 0!==o?o:"",e.underloading=null!==(c=t.underloading)&&void 0!==c?c:"",l[a.id]=e,N.a.patch("".concat(h,"providersDataPayOff.json"),Object(re.a)({},l)).then((function(e){I()}))}})),n[n.indexOf(t)]=e,Object(re.a)({},a,{data:n})}))}),600)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){t(),o((function(t){var a=Object(oe.a)(t.data);return i.map((function(t){t.data===a[a.indexOf(e)]&&N.a.delete("".concat(h,"providersDataPayOff/").concat(t.id,".json")).then((function(e){I()}))})),a.splice(a.indexOf(e),1),Object(re.a)({},t,{data:a})}))}),600)}))}}}),r.a.createElement("p",null,"\u0418\u0442\u043e\u0433\u043e: ",X(b)))},Ue=a(274),He=a.n(Ue),Ke=He.a.ExcelFile,$e=He.a.ExcelFile.ExcelSheet,Qe=He.a.ExcelFile.ExcelColumn,Xe=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=[],i=[];function p(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=0,n=0,r=0,o=0;o<e.length;o++)t?("aoNewGround"===e[o][0]&&(a+=Number(e[o][1])),"oooNewGround"===e[o][0]&&(n+=Number(e[o][1])),"oooIntegral"===e[o][0]&&(r+=Number(e[o][1]))):("aoNewGround"===e[o][0]&&(a+=Number(e[o][1])+Number(e[o][2])+Number(e[o][3])+Number(e[o][4])),"oooNewGround"===e[o][0]&&(n+=Number(e[o][1])+Number(e[o][2])+Number(e[o][3])+Number(e[o][4])),"oooIntegral"===e[o][0]&&(r+=Number(e[o][1])+Number(e[o][2])+Number(e[o][3])+Number(e[o][4])));return{aoNewGround:a,oooNewGround:n,oooIntegral:r}}var m=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,o,d,s,m,f,b,g,v,y,O,j,E,S,x;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"/company.json"));case 2:for(n in(a=e.sent).data)i.push(a.data[n]);return e.next=6,N.a.get("".concat(h,"payoff.json"));case 6:for(m in r=e.sent,JSON.parse(localStorage.getItem("provider")).map((function(e){for(var t in r.data)e[1]===r.data[t].provider&&l.push({company:r.data[t].company,payoff:Number(r.data[t].payoff),provider:e[0].name})})),o={},d=[],s=[],l.map((function(e){o[e.provider]?o[e.provider].push([e.company,e.payoff]):o[e.provider]=[[e.company,e.payoff]]})),o)d[m]=p(o[m]);return f=[],b=[],g=[],e.next=18,N.a.get("".concat(h,"providersDataPayOff.json"));case 18:return v=e.sent,e.next=21,N.a.get("".concat(h,"objects.json"));case 21:for(j in y=e.sent,O=function(e){JSON.parse(localStorage.getItem("provider")).map((function(t){if(t[1]===v.data[e].provider)for(var a in y.data)a===v.data[e].object&&f.push({provider:t[0].name,subTotal:v.data[e].subTotal,company:y.data[a].company,delivery:v.data[e].delivery,plain:v.data[e].plain,underloading:v.data[e].underloading})}))},v.data)O(j);for(E in f.map((function(e){var t,a,n,r,o,c;b[e.provider]?b[e.provider].push([e.company,e.subTotal,null!==(t=e.delivery)&&void 0!==t?t:0,null!==(a=e.plain)&&void 0!==a?a:0,null!==(n=e.underloading)&&void 0!==n?n:0]):b[e.provider]=[[e.company,e.subTotal,null!==(r=e.delivery)&&void 0!==r?r:0,null!==(o=e.plain)&&void 0!==o?o:0,null!==(c=e.underloading)&&void 0!==c?c:0]]})),b)g[E]=p(b[E],!1);for(x in S=function(e){var t=function(t){i.map((function(a){a.title===t&&s.push({provider:e,company:a.name,debt:X(Math.round(Number(void 0!==g[e]?g[e][t]:0)-Number(void 0!==d[e]?d[e][t]:0),2))})}))};for(var a in g[e])t(a)},g)S(x);c(s);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ke,{filename:"\u041e\u0442\u0447\u0435\u0442 \u043f\u043e \u0432\u0441\u0435\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u0430\u043c ".concat(new Date),element:r.a.createElement(z.a,{style:{color:"#fff"},onClick:m,title:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442"},r.a.createElement(Je.a,null))},r.a.createElement($e,{data:0!==o.length?o:m(),name:"Debt Provider"},r.a.createElement(Qe,{label:"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a",value:"provider"}),r.a.createElement(Qe,{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"}),r.a.createElement(Qe,{label:"\u0414\u043e\u043b\u0433",value:"debt"})))},Ye=a(495),Ze=a.n(Ye),_e=function(e){var t=r.a.useState({}),a=Object(s.a)(t,2),o=a[0],c=a[1],l=r.a.useState({}),i=Object(s.a)(l,2),p=(i[0],i[1],r.a.useState(0)),m=Object(s.a)(p,2),f=(m[0],m[1],r.a.useState(!0)),b=Object(s.a)(f,2),g=b[0],v=b[1],y=Object(n.useState)([]),O=Object(s.a)(y,2),j=(O[0],O[1]),E=[];function S(e){return e.sort((function(e,t){var a=e.date.split("."),n="".concat(a[2],"-").concat(a[1],"-").concat(a[0]);a=t.date.split(".");var r="".concat(a[2],"-").concat(a[1],"-").concat(a[0]);return new Date(n)<new Date(r)?1:-1}))}function x(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(h,"payoff.json"));case 2:for(n in(a=t.sent).data)a.data[n].payoff="NaN"!==Number(a.data[n].payoff)?X(a.data[n].payoff):a.data[n].payoff,a.data[n].company===e.company&&a.data[n].provider===e.providerId&&(r=a.data[n].date.split("."),E.push({id:n,date:"".concat(r[2],"-").concat(r[1],"-").concat(r[0]),payoff:a.data[n].payoff,company:a.data[n].company,provider:a.data[n].provider}));S(E),c({columns:[{title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",field:"date",emptyValue:"",type:"date",cellStyle:{fontSize:"small",padding:"0px"}},{title:"\u0421\u0443\u043c\u043c\u0430",field:"payoff",emptyValue:"",cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}}],data:E}),v(!1),j(E);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){x()}),[]),e.isUpdate&&x();var T={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(we.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))}))};return r.a.createElement(ie.a,{style:{borderRadius:0},icons:T,localization:{header:{actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"},body:{emptyDataSourceMessage:"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439",filterRow:{filterTooltip:"\u0424\u0438\u043b\u044c\u0442\u0440"},addTooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",deleteTooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",editTooltip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",editRow:{deleteText:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c?",cancelTooltip:"\u041e\u0442\u043c\u0435\u043d\u0430",saveTooltip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}},grouping:{placeholder:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a..."},toolbar:{addRemoveColumns:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432",nRowsSelected:"{0} \u0437\u0430\u043f\u0438\u0441\u044c(\u0435\u0439) \u0432\u044b\u0431\u0440\u0430\u043d\u043e",showColumnsTitle:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",showColumnsAriaLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",exportTitle:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportAriaLabel:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportName:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSV",searchTooltip:"\u041f\u043e\u0438\u0441\u043a",searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a"},pagination:{labelDisplayedRows:"{from}-{to} \u0438\u0437 {count}",labelRowsSelect:"\u0441\u0442\u0440\u043e\u043a",labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:",firstAriaLabel:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",firstTooltip:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousAriaLabel:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousTooltip:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextAriaLabel:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextTooltip:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastAriaLabel:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430",lastTooltip:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430"}},title:e.companyName,columns:o.columns,data:o.data,options:{sorting:!1,selection:!1,grouping:!1,filtering:!1,exportButton:!1,pageSizeOptions:[5],draggable:!1,search:!1,columnsButton:!1,doubleHorizontalScroll:!1,emptyRowsWhenPaging:!1,exportAllData:!1,header:!0,showEmptyDataSourceMessage:!1,showFirstLastPageButtons:!1,showSelectAllCheckbox:!1,showTextRowsSelected:!1,tableLayout:"fixed"},isLoading:g,editable:{onRowAdd:function(t){return new Promise((function(a){setTimeout((function(){a(),c((function(a){var n=Object(oe.a)(a.data);return t.payoff=t.payoff.replace(",",".").replace(/ /g,""),n.push(t),N.a.post("".concat(h,"payoff.json"),{date:new Date(t.date).toLocaleDateString(),payoff:t.payoff,company:e.company,provider:e.providerId}).then((function(e){x()})),Object(re.a)({},a,{data:n})}))}),600)}))},onRowUpdate:function(t,a){return new Promise((function(n){setTimeout((function(){n(),a&&c((function(n){var r=Object(oe.a)(n.data),o={};return t.payoff=t.payoff.replace(",",".").replace(/ /g,""),o[a.id]={date:new Date(t.date).toLocaleDateString(),payoff:t.payoff,company:e.company,provider:e.providerId},N.a.patch("".concat(h,"payoff.json"),Object(re.a)({},o)).then((function(e){x()})),r[r.indexOf(a)]=t,Object(re.a)({},n,{data:r})}))}),600)}))},onRowDelete:function(e){return new Promise((function(t){setTimeout((function(){t(),c((function(t){var a=Object(oe.a)(t.data);return N.a.delete("".concat(h,"payoff/").concat(e.id,".json")).then((function(e){x()})),a.splice(a.indexOf(e),1),Object(re.a)({},t,{data:a})}))}),600)}))}}})},et="https://crmintegralapp.firebaseio.com/",tt=(a(731),function(e){var t="";return(t=e.toString().includes(",")?e.toString().split(","):e.toString().split("."))[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),1===t.length?t.push("00"):1===t[1].length&&(t[1]+=0),t.join(",")}),at=function(e){return e.toString().includes("-")},nt=function(e){return e[0].toUpperCase()+e.slice(1)},rt=Object(p.a)({root:{minWidth:100},title:{fontSize:14}}),ot=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),p=i[0],m=i[1],f=Object(n.useState)(""),b=Object(s.a)(f,2),g=b[0],v=b[1],O=[],j=[];function E(e){for(var t=0,a=0,n=0,r=0;r<e.length;r++)"aoNewGround"===e[r].company&&(t+=Number(e[r].payoff)),"oooNewGround"===e[r].company&&(a+=Number(e[r].payoff)),"oooIntegral"===e[r].company&&(n+=Number(e[r].payoff));return{aoNewGround:Math.round(t),oooNewGround:Math.round(a),oooIntegral:Math.round(n)}}function h(){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,l,i,d,s,p,f,b,g,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(et,"/company.json"));case 2:for(a in(t=e.sent).data)j.push(t.data[a]);return e.next=6,N.a.get("".concat(et,"payoff.json"));case 6:for(r in(n=e.sent).data)JSON.parse(localStorage.getItem("currentProvider"))===n.data[r].provider&&O.push({company:n.data[r].company,payoff:n.data[r].payoff});return c(E(O)),JSON.parse(localStorage.getItem("provider")).map((function(e){e[1]===JSON.parse(localStorage.getItem("currentProvider"))&&v(e[0].name)})),o=[],l=[],e.next=15,N.a.get("".concat(et,"/objects.json"));case 15:for(d in(i=e.sent).data)i.data[d].provider===JSON.parse(localStorage.getItem("currentProvider"))&&(l.push([i.data[d].company,i.data[d].name,d]),o.push([i.data[d].name,d]));return e.next=19,N.a.get("".concat(et,"providersDataPayOff.json"));case 19:for(b in s=e.sent,o.map((function(e){var t=0,a=0;for(var n in s.data)s.data[n].object===e[1]&&(s.data[n].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(t+=Number(s.data[n].subTotal.replace(",",".").replace(/ /g,"")),s.data[n].delivery&&(t+=Number(s.data[n].delivery.replace(",","."))),s.data[n].plain&&(t+=Number(s.data[n].plain.replace(",","."))),s.data[n].underloading&&(t+=Number(s.data[n].underloading.replace(",",".")))),a+=Number(s.data[n].subTotal.replace(",",".").replace(/ /g,"")),s.data[n].delivery&&(a+=Number(s.data[n].delivery.replace(",","."))),s.data[n].plain&&(a+=Number(s.data[n].plain.replace(",","."))),s.data[n].underloading&&(a+=Number(s.data[n].underloading.replace(",","."))));for(var r in l)l[r][2]===e[1]&&(l[r][2]=t,l[r][3]=a)})),p={},f={},l.map((function(e){p[e[0]]?p[e[0]]+=e[2]:p[e[0]]=e[2],f[e[0]]?f[e[0]]+=e[3]:f[e[0]]=e[3]})),j)j[b].total=null!==(g=p[j[b].title])&&void 0!==g?g:0,j[b].total2=null!==(y=f[j[b].title])&&void 0!==y?y:0;m(j);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){h()}),[]),e.isUpdate&&h();var x=rt();return r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,p.map((function(e){return r.a.createElement("td",{style:{width:"100vw"}},r.a.createElement(_.b,{to:"/projectAccounting/provider/".concat(g,"/").concat(e.name),style:{color:"rgba(0, 0, 0, 0.87)",textDecoration:"none"},onClick:function(){var t,a;t=e.title,a=e.name,localStorage.setItem("currentCompany",JSON.stringify(t)),localStorage.setItem("currentCompanyName",JSON.stringify(a))}},r.a.createElement($.a,{className:x.root},r.a.createElement(Q.a,null,r.a.createElement(y.a,{variant:"h5",component:"h2"},r.a.createElement("p",null,e.name)),r.a.createElement(y.a,{className:x.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},tt(e.total))),r.a.createElement(y.a,{className:x.title,color:"textSecondary",gutterBottom:!0},r.a.createElement("b",null,"\u0414\u043e\u043b\u0433"),": ",r.a.createElement("span",{style:{color:at(e.total2-o[e.title])?"blue":"red",fontWeight:"bold"}},tt(e.total2-o[e.title])))))))})))))},ct=(a(732),function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),p=i[0],m=i[1],f=Object(n.useState)([]),b=Object(s.a)(f,2),g=b[0],v=b[1],O=Object(n.useState)(0),j=Object(s.a)(O,2),E=(j[0],j[1],[]),h=[],S=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(et,"/objects.json"));case 2:for(a in(t=e.sent).data)t.data[a].provider===JSON.parse(localStorage.getItem("currentProvider"))&&t.data[a].company===JSON.parse(localStorage.getItem("currentCompany"))&&(E.push([t.data[a].name]),h.push([t.data[a].name,a]));return localStorage.setItem("objects",JSON.stringify(h)),e.next=7,N.a.get("".concat(et,"/company.json"));case 7:for(r in(n=e.sent).data)n.data[r].title===JSON.parse(localStorage.getItem("currentCompany"))&&m(n.data[r].name);return JSON.parse(localStorage.getItem("provider")).map((function(e){e[1]===JSON.parse(localStorage.getItem("currentProvider"))&&v(e[0].name)})),e.next=13,N.a.get("".concat(et,"providersDataPayOff.json"));case 13:o=e.sent,h.map((function(e){var t=0;for(var a in o.data)o.data[a].object===e[1]&&(o.data[a].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(t+=Number(o.data[a].subTotal),o.data[a].delivery&&(t+=Number(o.data[a].delivery.replace(",","."))),o.data[a].plain&&(t+=Number(o.data[a].plain.replace(",","."))),o.data[a].underloading&&(t+=Number(o.data[a].underloading.replace(",",".")))));for(var n in E)E[n][0]===e[0]&&(E[n][1]=t)})),c(E);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S()}),[]),r.a.createElement("div",{style:{marginBottom:100}},r.a.createElement("p",null,null!==JSON.parse(localStorage.getItem("currentCompanyName"))?JSON.parse(localStorage.getItem("currentCompanyName")):null),o.map((function(e){return r.a.createElement(_.b,{to:"/projectAccounting/provider/".concat(g,"/").concat(p,"/").concat(e[0]),key:Math.random(),onClick:function(){localStorage.setItem("currentObject",JSON.stringify(e[0]))}},r.a.createElement(z.a,null,r.a.createElement($.a,{className:"card"},r.a.createElement("div",{className:"cardItem"},r.a.createElement(y.a,{className:"title",gutterBottom:!0},e[0],r.a.createElement(y.a,{className:"cardSum",color:"textSecondary"},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},tt(e[1]))))))))})))}),lt=(Object(p.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),l=Object(s.a)(c,2),i=l[0],p=l[1],m=Object(n.useState)(0),f=Object(s.a)(m,2),b=f[0],g=f[1],v=Object(n.useState)(!0),y=Object(s.a)(v,2),O=y[0],j=y[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),S=(h[0],h[1]);function x(e){return e.sort((function(e,t){return e[1]>t[1]?1:-1}))}var w=function(){var e=document.getElementById("volume").value,t=document.getElementById("pricePerOneTon").value,a=document.querySelector("#subTotal"),n=a.parentElement,r=document.createElement("input");r.id=a.id,r.style=a.style.cssText,r.placeholder=a.placeholder,e.includes(",")&&(e=e.replace(",",".").replace(" ","")),t.includes(",")&&(t=t.replace(",",".").replace(" ","")),r.value=Number(e)*Number(t),document.querySelector("#subTotal").remove(),n.append(r)},T=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,c,l,i,d,s,m,f,b,v,y,O,E=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.length>0&&void 0!==E[0]?E[0]:null,e.next=3,N.a.get("".concat(et,"dictionaryCement.json"));case 3:for(m in t=e.sent,a={},n=[],c=[],l=[],i=[],d=[],s=0,t.data)n.push([m,t.data[m].name]),c.push([m,t.data[m].name,t.data[m].price]);return f=x(n),b=x(c),f.map((function(e){a[e[0]]=e[1]})),b.map((function(e){l[e[0]]=[e[1],e[2]]})),function(e){S(e);var t=document.querySelector("#pricePerOneTon").parentElement,a=document.querySelector("#pricePerOneTon"),n=document.createElement("input");n.id=a.id,n.style=a.style.cssText,n.placeholder=a.placeholder,n.value=l[e][1],document.querySelector("#pricePerOneTon").remove(),t.append(n),w()},e.next=19,N.a.get("".concat(et,"providersDataPayOff.json"));case 19:for(O in v=e.sent,y=function(e){localStorage.getItem("objects")&&JSON.parse(localStorage.getItem("objects")).map((function(t){var a,n;JSON.parse(localStorage.getItem("currentProvider"))===v.data[e].provider&&(t[0]===JSON.parse(localStorage.getItem("currentObject"))&&t[1]===v.data[e].object&&(v.data[e].comment.toLowerCase().includes("\u0434\u043e\u043b\u0433")||(s+=Number(v.data[e].subTotal.replace(",",".")),v.data[e].delivery&&(s+=Number(v.data[e].delivery.replace(",","."))),v.data[e].plain&&(s+=Number(v.data[e].plain.replace(",","."))),v.data[e].underloading&&(s+=Number(v.data[e].underloading.replace(",",".")))),v.data[e].volume="NaN"!==Number(v.data[e].volume)&&0!==Number(v.data[e].volume)?tt(v.data[e].volume.replace(",",".")):v.data[e].volume,v.data[e].pricePerOneTon="NaN"!==Number(v.data[e].pricePerOneTon)&&0!==Number(v.data[e].pricePerOneTon)?tt(v.data[e].pricePerOneTon.replace(",",".")):v.data[e].pricePerOneTon,v.data[e].subTotal4Percent="NaN"!==Number(v.data[e].subTotal)&&0!==Number(v.data[e].subTotal)?tt(Number(v.data[e].subTotal.replace(",","."))+v.data[e].subTotal.replace(",",".")/100*4):v.data[e].subTotal,v.data[e].subTotal="NaN"!==Number(v.data[e].subTotal)&&0!==Number(v.data[e].subTotal)?tt(v.data[e].subTotal.replace(",",".")):v.data[e].subTotal,v.data[e].comment=nt(v.data[e].comment),v.data[e].isAccounting=null!==(a=v.data[e].isAccounting)&&void 0!==a&&a,v.data[e].whoCompany=null!==(n=v.data[e].whoCompany)&&void 0!==n?n:"",i.push({id:e,data:v.data[e]}),d.push(v.data[e])))}))},v.data)y(O);g(s),p(i),o({columns:[{title:"\u041c\u0430\u0440\u043a\u0430 \u0446\u0435\u043c\u0435\u043d\u0442\u0430 / \u0431\u0435\u0442\u043e\u043d\u0430",field:"brandCement",emptyValue:"",editable:"never",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},lookup:a},{title:"\u041f\u0435\u0440\u0438\u043e\u0434",field:"period",emptyValue:"",editable:"never",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u041e\u0431\u044a\u0435\u043c",field:"volume",emptyValue:"",editable:"never",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u0421\u0443\u043c\u043c\u0430",field:"subTotal",emptyValue:"",editable:"never",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u0421\u0443\u043c\u043c\u0430 (+4%)",field:"subTotal4Percent",emptyValue:"",editable:"never",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u041f\u0435\u0440\u0435\u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0441\u0447\u0435\u0442",field:"isAccounting",type:"boolean",emptyValue:!1,headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"}},{title:"\u041a\u043e\u043c\u0443 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d",field:"whoCompany",emptyValue:"",headerStyle:{textAlign:"center"},cellStyle:{fontSize:"small",padding:"0px",textAlign:"center"},render:function(e){return""===e.whoCompany?r.a.createElement("span",{style:{color:"#ccc"}},"\u0417\u0434\u0435\u0441\u044c \u043f\u0443\u0441\u0442\u043e..."):e.whoCompany}}],data:d}),j(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){T()}),[]);var C={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(we.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))}))};return r.a.createElement("div",{style:{paddingBottom:60}},r.a.createElement(ie.a,{icons:C,localization:{header:{actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"},body:{emptyDataSourceMessage:"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439",filterRow:{filterTooltip:"\u0424\u0438\u043b\u044c\u0442\u0440"},addTooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",deleteTooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",editTooltip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",editRow:{deleteText:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c?",cancelTooltip:"\u041e\u0442\u043c\u0435\u043d\u0430",saveTooltip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}},grouping:{placeholder:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a..."},toolbar:{addRemoveColumns:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432",nRowsSelected:"{0} \u0437\u0430\u043f\u0438\u0441\u044c(\u0435\u0439) \u0432\u044b\u0431\u0440\u0430\u043d\u043e",showColumnsTitle:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",showColumnsAriaLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",exportTitle:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportAriaLabel:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportName:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSV",searchTooltip:"\u041f\u043e\u0438\u0441\u043a",searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a"},pagination:{labelDisplayedRows:"{from}-{to} \u0438\u0437 {count}",labelRowsSelect:"\u0441\u0442\u0440\u043e\u043a",labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:",firstAriaLabel:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",firstTooltip:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousAriaLabel:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousTooltip:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextAriaLabel:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextTooltip:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastAriaLabel:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430",lastTooltip:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430"}},title:JSON.parse(localStorage.getItem("currentObject")),columns:a.columns,data:a.data,options:{sorting:!1,selection:!1,grouping:!1,filtering:!1,exportButton:!0,pageSizeOptions:[10],pageSize:10,draggable:!1,exportAllData:!0,paging:!1},detailPanel:function(e){if("-M3ytpeFI7Cry9gqb6c9"===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement("div",{style:{width:"400px",margin:"10px auto"}},r.a.createElement("span",null,r.a.createElement("label",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: "),r.a.createElement("label",{style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px",marginRight:"30px"},id:"delivery"},e.delivery?tt(e.delivery):0)),r.a.createElement("span",null,r.a.createElement("label",null,"\u041d\u0435\u0434\u043e\u0433\u0440\u0443\u0437: "),r.a.createElement("label",{style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px",marginRight:"30px"},id:"underloading"},e.underloading?tt(e.underloading):0)),r.a.createElement("span",null,r.a.createElement("label",null,"\u041f\u0440\u043e\u0441\u0442\u043e\u0439: "),r.a.createElement("label",{style:{border:"none",borderBottom:"1px solid #ccc",outline:"none",marginTop:"5px",paddingBottom:"6px",width:"150px"},id:"plain"},e.plain?tt(e.plain):0)))},onRowClick:function(e,t,a){"-M3ytpeFI7Cry9gqb6c9"===JSON.parse(localStorage.getItem("currentProvider"))&&a()},isLoading:O,editable:{onRowUpdate:function(e,t){return new Promise((function(a){setTimeout((function(){a(),t&&o((function(a){var n=Object(oe.a)(a.data);return i.map((function(a){a.data===n[n.indexOf(t)]&&N.a.patch("".concat(et,"providersDataPayOff/").concat(a.id,".json"),{isAccounting:e.isAccounting,whoCompany:e.whoCompany}).then((function(e){T()}))})),n[n.indexOf(t)]=e,Object(re.a)({},a,{data:n})}))}),600)}))}}}),r.a.createElement("p",null,"\u0418\u0442\u043e\u0433\u043e: ",tt(b)))}),it=function(e){var t=r.a.useState({}),a=Object(s.a)(t,2),o=a[0],c=a[1],l=r.a.useState({}),i=Object(s.a)(l,2),p=(i[0],i[1],r.a.useState(0)),m=Object(s.a)(p,2),f=(m[0],m[1],r.a.useState(!0)),b=Object(s.a)(f,2),g=b[0],v=b[1],y=r.a.useState(0),O=Object(s.a)(y,2),j=O[0],E=O[1],h=Object(n.useState)([]),S=Object(s.a)(h,2),x=(S[0],S[1]),w=[];function T(e){return e.sort((function(e,t){var a=e.date.split("."),n="".concat(a[2],"-").concat(a[1],"-").concat(a[0]);a=t.date.split(".");var r="".concat(a[2],"-").concat(a[1],"-").concat(a[0]);return new Date(n)<new Date(r)?1:-1}))}function C(){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("".concat(et,"payoff.json"));case 2:for(n in(a=t.sent).data)a.data[n].payoff="NaN"!==Number(a.data[n].payoff)?tt(a.data[n].payoff):a.data[n].payoff,a.data[n].company===e.company&&a.data[n].provider===e.providerId&&(r=a.data[n].date.split("."),w.push({id:n,date:"".concat(r[2],"-").concat(r[1],"-").concat(r[0]),payoff:a.data[n].payoff,company:a.data[n].company,provider:a.data[n].provider}));T(w),c({columns:[{title:"\u0414\u0430\u0442\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",field:"date",emptyValue:"",type:"date",cellStyle:{fontSize:"small"}},{title:"\u0421\u0443\u043c\u043c\u0430",field:"payoff",emptyValue:"",cellStyle:{fontSize:"small",textAlign:"center"}}],data:w}),v(!1),E(w.length),x(w);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(n.useEffect)((function(){C()}),[]),e.isUpdate&&C();var I={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(we.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))}))};return j?r.a.createElement(ie.a,{style:{borderRadius:0},icons:I,localization:{header:{actions:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"},body:{emptyDataSourceMessage:"\u041f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439",filterRow:{filterTooltip:"\u0424\u0438\u043b\u044c\u0442\u0440"},addTooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",deleteTooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",editTooltip:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",editRow:{deleteText:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u0443 \u0437\u0430\u043f\u0438\u0441\u044c?",cancelTooltip:"\u041e\u0442\u043c\u0435\u043d\u0430",saveTooltip:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}},grouping:{placeholder:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a..."},toolbar:{addRemoveColumns:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432",nRowsSelected:"{0} \u0437\u0430\u043f\u0438\u0441\u044c(\u0435\u0439) \u0432\u044b\u0431\u0440\u0430\u043d\u043e",showColumnsTitle:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",showColumnsAriaLabel:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0446\u044b",exportTitle:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportAriaLabel:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442",exportName:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 CSV",searchTooltip:"\u041f\u043e\u0438\u0441\u043a",searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a"},pagination:{labelDisplayedRows:"{from}-{to} \u0438\u0437 {count}",labelRowsSelect:"\u0441\u0442\u0440\u043e\u043a",labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:",firstAriaLabel:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",firstTooltip:"\u041f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousAriaLabel:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",previousTooltip:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextAriaLabel:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",nextTooltip:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",lastAriaLabel:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430",lastTooltip:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u043f\u043e\u043b\u043e\u0441\u0430"}},title:e.companyName,columns:o.columns,data:o.data,options:{sorting:!1,selection:!1,grouping:!1,filtering:!1,exportButton:!1,pageSizeOptions:[5],draggable:!1,search:!1,columnsButton:!1,doubleHorizontalScroll:!1,emptyRowsWhenPaging:!1,exportAllData:!1,header:!0,showEmptyDataSourceMessage:!1,showFirstLastPageButtons:!1,showSelectAllCheckbox:!1,showTextRowsSelected:!1,tableLayout:"fixed"},isLoading:g}):null},ut=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#00CED1",textAlign:"center"},appBar2:{backgroundColor:"#eee",top:"auto",bottom:0},drawer:{width:180,flexShrink:0},drawer2:{width:270,flexShrink:0},drawerPaper:{width:180},drawerPaper2:{width:270},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,drRoot:{backgroundColor:"#282c34 !important",height:"100vh",color:"#fff"},listColor:{color:"#fff"}}})),dt=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),p=i[0],h=i[1],S=Object(n.useState)([]),w=Object(s.a)(S,2),C=w[0],I=w[1],A=Object(n.useState)([]),J=Object(s.a)(A,2),D=J[0],V=J[1],W=[],q=function(){h(!0),h(!1),F()};function M(e){for(var t=0,a=0;a<e.length;a++)t+=Number(e[a].payoff);return t}function F(){return G.apply(this,arguments)}function G(){return(G=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,l,i,d,s,p,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(et,"providers.json"));case 2:for(n in t=e.sent,a=[],t.data)a.push([t.data[n],n]);return localStorage.setItem("provider",JSON.stringify(a)),c(a),e.next=9,N.a.get("".concat(et,"payoff.json"));case 9:for(o in(r=e.sent).data)r.data[o].provider===JSON.parse(localStorage.getItem("currentProvider"))&&W.push({company:r.data[o].company,payoff:r.data[o].payoff});return l=[],i=[],e.next=15,N.a.get("".concat(et,"/objects.json"));case 15:for(s in(d=e.sent).data)d.data[s].provider===JSON.parse(localStorage.getItem("currentProvider"))&&(i.push([d.data[s].company,d.data[s].name,s]),l.push([d.data[s].name,s]));return e.next=19,N.a.get("".concat(et,"providersDataPayOff.json"));case 19:p=e.sent,l.map((function(e){var t=0;for(var a in p.data)p.data[a].object===e[1]&&(t+=Number(p.data[a].subTotal.replace(",",".").replace(/ /g,"")),p.data[a].delivery&&(t+=Number(p.data[a].delivery.replace(",","."))),p.data[a].plain&&(t+=Number(p.data[a].plain.replace(",","."))),p.data[a].underloading&&(t+=Number(p.data[a].underloading.replace(",","."))));for(var n in i)i[n][2]===e[1]&&(i[n][2]=t)})),m=0,i.map((function(e){m+=Number(e[2])})),V(m),I(M(W)?m-M(W):0);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){F()}),[]);var U=ut();return 0!==o.length?r.a.createElement("div",{className:U.root},r.a.createElement(b.a,null),r.a.createElement(f.a,{position:"fixed",className:U.appBar},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h5"},"CRM \u0441\u0438\u0441\u0442\u0435\u043c\u0430 Integral")),r.a.createElement("div",{style:{position:"absolute",top:10,right:10}},r.a.createElement(_.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement(z.a,{style:{color:"#fff",textDecoration:"none",fontSize:16},title:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f"},"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f")))),r.a.createElement(m.a,{className:U.drawer,variant:"permanent",classes:{paper:U.drawerPaper}},r.a.createElement("div",{className:U.toolbar}),r.a.createElement(v.a,{classes:{root:U.drRoot}},o.map((function(e,t){return r.a.createElement(_.b,{to:"/projectAccounting/provider/".concat(e[0].name),style:{color:"#fff",textDecoration:"none"},onClick:function(){var t;t=e[1],localStorage.setItem("currentProvider",JSON.stringify(t)),F(),h(!0),setTimeout((function(){h(!1)}),1)}},r.a.createElement(O.a,{button:!0,key:e.name,className:JSON.parse(localStorage.getItem("currentProvider"))===e[1]?"isActive":""},r.a.createElement(j.a,{classes:{root:U.listColor}},"car"===e[0].iconType?r.a.createElement(x.Icon,{icon:T.a}):"handshake"===e[0].iconType?r.a.createElement(x.Icon,{icon:P.a}):"dump-truck"===e[0].iconType?r.a.createElement(x.Icon,{icon:R.a}):"tanker-truck"===e[0].iconType?r.a.createElement(x.Icon,{icon:k.a}):"skull"===e[0].iconType?r.a.createElement(x.Icon,{icon:B.a}):r.a.createElement(x.Icon,{icon:L.a})),r.a.createElement(E.a,{primary:e[0].name})))})))),r.a.createElement("main",{className:U.content,style:{paddingLeft:10,paddingRight:10}},void 0!==e.type&&"indexProjectAccounting"===e.type?r.a.createElement(ot,null):null,void 0!==e.type&&"providerProjectAccounting"===e.type?r.a.createElement(ot,{isUpdate:p}):null,void 0!==e.type&&"providerObjectProjectAccounting"===e.type?r.a.createElement(ct,null):null,void 0!==e.type&&"providerObjectDetailProjectAccounting"===e.type?r.a.createElement(lt,null):null),r.a.createElement(f.a,{position:"fixed",className:U.appBar2},r.a.createElement(g.a,{style:{paddingLeft:210}},r.a.createElement(y.a,{variant:"h6",noWrap:!0},r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",tt(D)),r.a.createElement("br",null),r.a.createElement("span",{style:{color:at(C)?"blue":"red",fontWeight:"bold"}},r.a.createElement("b",null,"\u0414\u043e\u043b\u0433"),": ",tt(C))))),r.a.createElement(m.a,{className:U.drawer2,variant:"permanent",classes:{paper:U.drawerPaper2},anchor:"right"},r.a.createElement("div",{className:U.toolbar}),r.a.createElement(v.a,{classes:{root:U.drRoot}},JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(it,{providerId:e[1],isUpdate:p,companyName:"\u0410\u041e \u041d\u042c\u042e \u0413\u0420\u0410\u0423\u041d\u0414",company:"aoNewGround",updateTable:q})})),JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(it,{providerId:e[1],isUpdate:p,companyName:"\u041e\u041e\u041e \u041d\u042c\u042e \u0413\u0420\u0410\u0423\u041d\u0414",company:"oooNewGround"})})),JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(it,{providerId:e[1],isUpdate:p,companyName:"\u041e\u041e\u041e \u0418\u041d\u0422\u0415\u0413\u0420\u0410\u041b",company:"oooIntegral"})}))))):null},st=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#00CED1",textAlign:"center"},appBar2:{backgroundColor:"#eee",top:"auto",bottom:0},drawer:{width:180,flexShrink:0},drawer2:{width:270,flexShrink:0},drawerPaper:{width:180},drawerPaper2:{width:270},content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,drRoot:{backgroundColor:"#282c34 !important",height:"100vh",color:"#fff"},listColor:{color:"#fff"}}})),pt=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(!1),i=Object(s.a)(l,2),p=i[0],S=i[1],w=Object(n.useState)([]),C=Object(s.a)(w,2),I=C[0],A=C[1],J=Object(n.useState)([]),D=Object(s.a)(J,2),V=D[0],W=D[1],q=Object(n.useState)([]),M=Object(s.a)(q,2),F=(M[0],M[1]),G=[],U=function(){S(!0),S(!1),$()};function H(e){for(var t=0,a=0;a<e.length;a++)t+=Number(e[a].payoff);return t}function $(){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(u.a.mark((function e(){var t,a,n,r,o,l,i,d,s,p,m,f,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"providers.json"));case 2:for(n in t=e.sent,a=[],t.data)a.push([t.data[n],n]);return localStorage.setItem("provider",JSON.stringify(a)),c(a),e.next=9,N.a.get("".concat(h,"payoff.json"));case 9:for(l in r=e.sent,o=JSON.parse(localStorage.getItem("currentProvider")),r.data)r.data[l].provider===o&&G.push({company:r.data[l].company,payoff:r.data[l].payoff});return i=[],d=[],e.next=16,N.a.get("".concat(h,"/objects.json"));case 16:for(p in(s=e.sent).data)s.data[p].provider===JSON.parse(localStorage.getItem("currentProvider"))&&(d.push([s.data[p].company,s.data[p].name,p]),i.push([s.data[p].name,p]));return e.next=20,N.a.get("".concat(h,"providersDataPayOff.json"));case 20:m=e.sent,i.map((function(e){var t=0,a=0;for(var n in m.data)m.data[n].object===e[1]&&(t+=Number(m.data[n].subTotal.replace(",",".").replace(/ /g,"")),m.data[n].delivery&&(t+=Number(m.data[n].delivery.replace(",","."))),m.data[n].plain&&(t+=Number(m.data[n].plain.replace(",","."))),m.data[n].underloading&&(t+=Number(m.data[n].underloading.replace(",","."))),a+=Number(m.data[n].subTotal.replace(",",".").replace(/ /g,"")),m.data[n].delivery&&(a+=Number(m.data[n].delivery.replace(",","."))),m.data[n].plain&&(a+=Number(m.data[n].plain.replace(",","."))),m.data[n].underloading&&(a+=Number(m.data[n].underloading.replace(",","."))));for(var r in d)d[r][2]===e[1]&&(d[r][2]=t,d[r][3]=a)})),f=0,b=0,d.map((function(e){f+=Number(e[2]),b+=Number(e[3])})),W(f),F(b),A(H(G)?Math.round(f-H(G),2):0);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){$()}),[]);var Z=st();return 0!==o.length?r.a.createElement("div",{className:Z.root},r.a.createElement(b.a,null),r.a.createElement(f.a,{position:"fixed",className:Z.appBar},r.a.createElement(g.a,null,r.a.createElement(y.a,{variant:"h5"},"CRM \u0441\u0438\u0441\u0442\u0435\u043c\u0430 Integral")),r.a.createElement("div",{style:{position:"absolute",top:10,right:10}},r.a.createElement(Xe,null),r.a.createElement(_.b,{to:"/settings"},r.a.createElement(z.a,{style:{color:"#fff"},title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(Ze.a,null))))),r.a.createElement(m.a,{className:Z.drawer,variant:"permanent",classes:{paper:Z.drawerPaper}},r.a.createElement("div",{className:Z.toolbar}),r.a.createElement(v.a,{classes:{root:Z.drRoot}},o.map((function(e,t){return r.a.createElement(_.b,{key:t,to:"/provider/".concat(e[0].name),style:{color:"#fff",textDecoration:"none"},onClick:function(){var t;t=e[1],localStorage.setItem("currentProvider",JSON.stringify(t)),$(),S(!0),setTimeout((function(){S(!1)}),1)}},r.a.createElement(O.a,{button:!0,key:e.name,className:JSON.parse(localStorage.getItem("currentProvider"))===e[1]?"isActive":""},r.a.createElement(j.a,{classes:{root:Z.listColor}},"car"===e[0].iconType?r.a.createElement(x.Icon,{icon:T.a}):"handshake"===e[0].iconType?r.a.createElement(x.Icon,{icon:P.a}):"dump-truck"===e[0].iconType?r.a.createElement(x.Icon,{icon:R.a}):"tanker-truck"===e[0].iconType?r.a.createElement(x.Icon,{icon:k.a}):"skull"===e[0].iconType?r.a.createElement(x.Icon,{icon:B.a}):r.a.createElement(x.Icon,{icon:L.a})),r.a.createElement(E.a,{primary:e[0].name})))}))),r.a.createElement(K,{fetchData:$})),r.a.createElement("main",{className:Z.content,style:{paddingLeft:10,paddingRight:10}},void 0!==e.type&&"index"===e.type?r.a.createElement(te,null):null,void 0!==e.type&&"provider"===e.type?r.a.createElement(te,{isUpdate:p}):null,void 0!==e.type&&"providerObject"===e.type?r.a.createElement(ne,null):null,void 0!==e.type&&"providerObjectDetail"===e.type?r.a.createElement(Ge,null):null),r.a.createElement(f.a,{position:"fixed",className:Z.appBar2},r.a.createElement(g.a,{style:{paddingLeft:210}},r.a.createElement(y.a,{variant:"h6",noWrap:!0},r.a.createElement("span",{style:{color:"green",fontWeight:"bold"}},r.a.createElement("b",null,"\u0412\u0437\u044f\u043b\u0438"),": ",X(V)),r.a.createElement("br",null),r.a.createElement("span",{style:{color:Y(I)?"blue":"red",fontWeight:"bold"}},r.a.createElement("b",null,"\u0414\u043e\u043b\u0433"),": ",X(I)),r.a.createElement("br",null)))),r.a.createElement(m.a,{className:Z.drawer2,variant:"permanent",classes:{paper:Z.drawerPaper2},anchor:"right"},r.a.createElement("div",{className:Z.toolbar}),r.a.createElement(v.a,{classes:{root:Z.drRoot}},JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(_e,{providerId:e[1],isUpdate:p,companyName:"\u0410\u041e \u041d\u042c\u042e \u0413\u0420\u0410\u0423\u041d\u0414",company:"aoNewGround",updateTable:U})})),JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(_e,{providerId:e[1],isUpdate:p,companyName:"\u041e\u041e\u041e \u041d\u042c\u042e \u0413\u0420\u0410\u0423\u041d\u0414",company:"oooNewGround"})})),JSON.parse(localStorage.getItem("provider")).map((function(e){if(e[1]===JSON.parse(localStorage.getItem("currentProvider")))return r.a.createElement(_e,{providerId:e[1],isUpdate:p,companyName:"\u041e\u041e\u041e \u0418\u041d\u0422\u0415\u0413\u0420\u0410\u041b",company:"oooIntegral"})}))))):null},mt=a(497),ft=a(496),bt=a.n(ft),gt=a(22),vt=a(789),yt=a(782),Ot=a(298),jt=function(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],o=a[1],c=function(){var t=Object(d.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o(!1),a=document.querySelector("#numberPayoff").value,n=document.querySelector("#price").value,void 0===a||null===a||""===a||void 0===n||null===n||""===n){t.next=7;break}return t.next=6,N.a.post("".concat(h,"dictionaryCement.json"),{name:a,price:n});case 6:e.fetchData();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"rgba(0,206,209, .7)",color:"#fff",width:"100%"},onClick:function(){o(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(W.a,{open:n,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement(F.a,{id:"form-dialog-title"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0446\u0435\u043c\u0435\u043d\u0442\u0430/\u0431\u0435\u0442\u043e\u043d\u0430"),r.a.createElement(M.a,null,r.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"numberPayoff",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0446\u0435\u043c\u0435\u043d\u0442\u0430/\u0431\u0435\u0442\u043e\u043d\u0430",type:"string",fullWidth:!0}),r.a.createElement(V.a,{autoFocus:!0,margin:"dense",id:"price",label:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",type:"string",fullWidth:!0})),r.a.createElement(q.a,null,r.a.createElement(z.a,{onClick:c,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(z.a,{onClick:c,color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))},Et=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(s.a)(c,2),i=l[0],m=l[1],b=Object(n.useState)([]),g=Object(s.a)(b,2),v=g[0],O=g[1];function j(e){var t=e.children,a=e.value,n=e.index,o=Object(mt.a)(e,["children","value","index"]);return r.a.createElement(y.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n)},o),a===n&&r.a.createElement(Ot.a,{p:3},t))}function E(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}var S=Object(p.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:800},table:{minWidth:800}}}));var x=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"dictionaryCement.json"));case 2:for(n in t=e.sent,a=[],t.data)a.push({id:n,name:t.data[n].name,price:X(t.data[n].price)});a.sort((function(e,t){return e.name>t.name?1:-1})),o(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"providers.json"));case 2:for(n in t=e.sent,a=[],t.data)a.push({id:n,name:t.data[n].name});m(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("".concat(h,"objects.json"));case 2:for(n in t=e.sent,a=[],t.data)a.push({id:n,name:t.data[n].name,provider:t.data[n].provider,company:t.data[n].company});O(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=S(),P=Object(gt.a)(),I=r.a.useState(0),R=Object(s.a)(I,2),A=R[0],k=R[1];Object(n.useEffect)((function(){x(),w(),T()}),[]);return r.a.createElement("div",{className:C.root,style:{marginTop:30,marginBottom:80}},r.a.createElement(f.a,{position:"static",color:"default"},r.a.createElement(vt.a,{value:A,onChange:function(e,t){k(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"full width tabs example"},r.a.createElement(yt.a,Object.assign({label:"\u041c\u0430\u0440\u043a\u0430 \u0446\u0435\u043c\u0435\u043d\u0442\u0430/\u0431\u0435\u0442\u043e\u043d\u0430"},E(0))),r.a.createElement(yt.a,Object.assign({label:"\u041f\u043e\u0441\u0442\u0430\u0449\u0438\u043a\u0438"},E(1))),r.a.createElement(yt.a,Object.assign({label:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"},E(2))))),r.a.createElement(bt.a,{axis:"rtl"===P.direction?"x-reverse":"x",index:A,onChangeIndex:function(e){k(e)}},r.a.createElement(j,{value:A,index:0,dir:P.direction},r.a.createElement(jt,{fetchData:x}),r.a.createElement("br",null),r.a.createElement("table",null,a.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(V.a,{id:e.id,variant:"outlined",defaultValue:e.name,style:{width:430,marginRight:20}})),r.a.createElement("td",null,r.a.createElement(V.a,{id:e.id,variant:"outlined",defaultValue:e.price,style:{width:150,marginRight:20}})),r.a.createElement("td",null,r.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"rgba(0,206,209, .7)",color:"#fff"},onClick:function(){!function(e){var t=document.querySelectorAll("#".concat(e));(t[1].value.includes(",")||t[1].value.includes("."))&&(t[1].value=t[1].value.replace(" ","").replace(",","."));var a={};a[t[0].id]={name:t[0].value,price:t[1].value},N.a.patch("".concat(h,"dictionaryCement.json"),Object(re.a)({},a)).then((function(e){x(),alert("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}))}(e.id)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))})))),r.a.createElement(j,{value:A,index:1,dir:P.direction},r.a.createElement("table",null,i.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(V.a,{id:e.id,variant:"outlined",defaultValue:e.name,style:{width:600,marginRight:20}})),r.a.createElement("td",null,r.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"rgba(0,206,209, .7)",color:"#fff"},onClick:function(){!function(e){var t=document.getElementById(e),a={};a[t.id]={name:t.value,iconType:"default"},N.a.patch("".concat(h,"providers.json"),Object(re.a)({},a)).then((function(e){w(),alert("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}))}(e.id)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))})))),r.a.createElement(j,{value:A,index:2,dir:P.direction},r.a.createElement("table",null,v.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,r.a.createElement(V.a,{id:e.id,variant:"outlined",defaultValue:e.name,style:{width:600,marginRight:20}})),r.a.createElement("td",null,r.a.createElement(z.a,{variant:"contained",style:{backgroundColor:"rgba(0,206,209, .7)",color:"#fff"},onClick:function(){!function(e,t,a){var n=document.getElementById(e),r={};r[n.id]={name:n.value,company:a,provider:t},N.a.patch("".concat(h,"objects.json"),Object(re.a)({},r)).then((function(e){T(),alert("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}))}(e.id,e.provider,e.company)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))))))},ht=a(783),St=(a(752),a(334)),Nt=a.n(St),xt=function(){var e=Object(n.useState)({token:"",login:""}),t=Object(s.a)(e,2),a=t[0],o=t[1];function c(e){return l.apply(this,arguments)}function l(){return(l=Object(d.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key&&void 0!==t.key){e.next=5;break}return e.next=3,N.a.get("".concat(h,"users.json"));case 3:for(r in(n=e.sent).data)n.data[r].login===a.login&&n.data[r].password===Nt()(a.password)&&(c=Nt()(n.data[r].login+n.data[r].password+new Date),localStorage.setItem("token",JSON.stringify(c)),localStorage.setItem("login",JSON.stringify(n.data[r].login)),o(Object(re.a)({},a,{token:c,login:n.data[r].login})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.token||localStorage.getItem("token")?"adder"===a.login||"adder"===JSON.parse(localStorage.getItem("login"))?r.a.createElement(pt,{type:"index"}):"adder"===a.login||"adder"===JSON.parse(localStorage.getItem("login"))||"accounting"===a.login||"accounting"===JSON.parse(localStorage.getItem("login"))?r.a.createElement(dt,{type:"indexProjectAccounting"}):void 0:r.a.createElement("div",{className:"Auth"},r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),r.a.createElement(ht.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement("div",null,r.a.createElement(V.a,{id:"outlined-email-input",label:"Login",type:"email",name:"email",autoComplete:"email",margin:"normal",variant:"outlined",onKeyPress:c,onChange:function(e){return o(Object(re.a)({},a,{login:e.target.value}))}}),r.a.createElement("br",null),r.a.createElement(V.a,{id:"outlined-email-input",label:"Password",type:"password",name:"password",autoComplete:"password",margin:"normal",variant:"outlined",onKeyPress:c,onChange:function(e){return o(Object(re.a)({},a,{password:e.target.value}))}}),r.a.createElement("br",null),r.a.createElement(z.a,{variant:"outlined",color:"primary",className:"btnAuth",onClick:c},"\u0412\u043e\u0439\u0442\u0438"))))},wt=function(){return r.a.createElement(pt,{type:"index"})},Tt=function(){return r.a.createElement(dt,{type:"indexProjectAccounting"})},Ct=function(){return r.a.createElement(pt,{type:"provider"})},Pt=function(){return r.a.createElement(dt,{type:"providerProjectAccounting"})},It=function(){return r.a.createElement(pt,{type:"providerObject"})},Rt=function(){return r.a.createElement(dt,{type:"providerObjectProjectAccounting"})},At=function(){return r.a.createElement(pt,{type:"providerObjectDetail"})},kt=function(){return r.a.createElement(dt,{type:"providerObjectDetailProjectAccounting"})};var Jt=Object(l.f)((function(){return JSON.parse(localStorage.getItem("token"))?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(pt,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:wt}),r.a.createElement(l.a,{exact:!0,path:"/projectAccounting/",component:Tt}),r.a.createElement(l.a,{exact:!0,path:"/provider/:name",component:Ct}),r.a.createElement(l.a,{exact:!0,path:"/projectAccounting/provider/:name",component:Pt}),r.a.createElement(l.a,{exact:!0,path:"/provider/:name/:companyName",component:It}),r.a.createElement(l.a,{exact:!0,path:"/projectAccounting/provider/:name/:companyName",component:Rt}),r.a.createElement(l.a,{exact:!0,path:"/provider/:name/:companyName/:objectName",component:At}),r.a.createElement(l.a,{exact:!0,path:"/projectAccounting/provider/:name/:companyName/:objectName",component:kt}),r.a.createElement(l.a,{exact:!0,path:"/settings",component:Et})))):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(xt,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Bt=r.a.createElement(_.a,null,r.a.createElement(Jt,null));c.a.render(Bt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[506,1,2]]]);
//# sourceMappingURL=main.abec6b2a.chunk.js.map